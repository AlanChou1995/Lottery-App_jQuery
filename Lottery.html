<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>大樂透</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU" crossorigin="anonymous">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.1/jquery.min.js"
        integrity="sha512-aVKKRRi/Q/YV+4mjoKBsE4x3H+BkegoM/em46NNlCqNTmUYADjBbeNefNxYV7giUp0VxICtqdrbqU7iVaeZNXA=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
</head>
<style>
    td {
        cursor: pointer;
    }

    td:hover {
        background: #555;
    }

    table {
        border-collapse: separate;
    }
</style>

<body>
    <div class="container flex-column mt-5 m-auto">
        <div class="col">
            <table class="table table-dark text-center table-bordered">
                <thead>
                    <th class="fs-3" colspan="7">大樂透</th>
                </thead>
                <tbody>
                    <tr>
                        <td>01</td>
                        <td>02</td>
                        <td>03</td>
                        <td>04</td>
                        <td>05</td>
                        <td>06</td>
                        <td>07</td>
                    </tr>
                    <tr>
                        <td>08</td>
                        <td>09</td>
                        <td>10</td>
                        <td>11</td>
                        <td>12</td>
                        <td>13</td>
                        <td>14</td>
                    </tr>
                    <tr>
                        <td>15</td>
                        <td>16</td>
                        <td>17</td>
                        <td>18</td>
                        <td>19</td>
                        <td>20</td>
                        <td>21</td>
                    </tr>
                    <tr>
                        <td>22</td>
                        <td>23</td>
                        <td>24</td>
                        <td>25</td>
                        <td>26</td>
                        <td>27</td>
                        <td>28</td>
                    </tr>
                    <tr>
                        <td>29</td>
                        <td>30</td>
                        <td>31</td>
                        <td>32</td>
                        <td>33</td>
                        <td>34</td>
                        <td>35</td>
                    </tr>
                    <tr>
                        <td>36</td>
                        <td>37</td>
                        <td>38</td>
                        <td>39</td>
                        <td>40</td>
                        <td>41</td>
                        <td>42</td>
                    </tr>
                    <tr>
                        <td>43</td>
                        <td>44</td>
                        <td>45</td>
                        <td>46</td>
                        <td>47</td>
                        <td>48</td>
                        <td>49</td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="col d-flex justify-content-between">
            <div>
                <button id="done" class="btn btn-outline-success">下注</button>
                <button id="random" class="btn btn-outline-primary">隨機</button>
                <button id="reset" class="btn btn-outline-danger">重選</button>
            </div>
            <div>
                <button id="bet" class="btn btn-outline-warning">兌獎</button>
            </div>
        </div>
        <hr>
        <div class="col text-lg-start">
            <p id="userChoose"></p>
            <p id="betNumber"></p>
            <p id="repeatNumber">中幾組數字</p>
        </div>
    </div>
</body>

</html>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-/bQdsTh/da6pkI1MST/rWKFNjaCP5gBSY4sEBT38Q/9RBh9AH40zEOg7Hlq2THRZ"
    crossorigin="anonymous"></script>

<script>
    let userChooseNumber = new Set();
    let userNumber = [];
    let result = [];
    const random = () => {
        for (let i = 1; i <= 6; i++) {
            let x = Math.floor(Math.random() * 49) + 1;
            if (result.includes(x.toString())) {
                i--;
                continue;
            } else if (x < 10) {
                result.push('0' + x)
            } else {
                result.push(x.toString());
            }
        }
        return result.sort((a, b) => a - b).join(' , ');
    }
    $('td').click(function (e) {
        if (userChooseNumber.size > 5 && !userChooseNumber.has(e.target.textContent)) {
            alert('已超過可選數字')
        }
        else if (userChooseNumber.has(e.target.textContent)) {
            userChooseNumber.delete(e.target.textContent)
            $(this).css({
                background: '',
            })
        }
        else if (!userChooseNumber.has(e.target.textContent)) {
            userChooseNumber.add(e.target.textContent)
            $(this).css({
                background: 'rgb(162, 135, 62)',
            })
        }
        console.log(userChooseNumber);
        console.log(result.length)
    })

    $('#done').click(function () {
        if (userChooseNumber.size < 6) {
            alert(`至少選取六位數字`)
        } else {
            userChooseNumber.forEach((value) => {
                userNumber.push(value);
            })
            $('#userChoose').text(`自選號碼：${userNumber.sort((a, b) => a - b).join(' , ')}`)
        }
        console.log(userNumber)
    })

    $('#bet').click(function () {
        if (userChooseNumber.size < 6) {
            alert('請先選取號碼下注')
        } else {
            $('#betNumber').text(`開獎號碼：${random()}`)
            console.log(result);
            result = [];

        }

    })

    // $('#reset').click(function () {
    //     userChooseNumber;
    //     userNumber = [];
    //     console.log(userChooseNumber);
    //     console.log(userNumber)
    // })

</script>


<!-- 
    1.下注後清空 userNumber && table數字
    2.隨機選好功能
    3.重選清空所有功能
    4.兌獎後清空 userNumber && userChooseNumber && result && table數字 
      並 return 比對後中幾組數字及獲得幾獎 
-->